{"ast":null,"code":"import { appStorageName } from '../../globals/globals';\nimport { createSlice } from '@reduxjs/toolkit';\n\nfunction getFavs() {\n  let favsFromStorage = localStorage.getItem(appStorageName);\n\n  if (favsFromStorage === null) {\n    favsFromStorage = [];\n  } else {\n    favsFromStorage = JSON.parse(favsFromStorage);\n  }\n\n  return favsFromStorage;\n}\n\nconst initialState = {\n  items: getFavs()\n};\n\nfunction getIndex(item, arr) {\n  return arr.findIndex(arrItem => arrItem.id === item.id);\n}\n\nexport const favsSlice = createSlice({\n  name: 'favs',\n  initialState,\n  reducers: {\n    addFav: (state, action) => {\n      const newFavs = [...state.items, action.payload];\n      localStorage.setItem(appStorageName, JSON.stringify(newFavs)); // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n\n      state.items = newFavs;\n    },\n    deleteFav: (state, action) => {\n      const itemsCopy = state.items;\n      itemsCopy.splice(getIndex(action.payload, state.items), 1);\n      localStorage.setItem(appStorageName, JSON.stringify(itemsCopy)); // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n\n      state.items = itemsCopy;\n    }\n  }\n}); // Action creators are generated for each case reducer function\n\nexport const {\n  addFav,\n  deleteFav\n} = favsSlice.actions;\nexport default favsSlice.reducer;","map":{"version":3,"sources":["/Users/alicelu/Desktop/PROJECTS/repos/react-project/src/features/favs/favsSlice.js"],"names":["appStorageName","createSlice","getFavs","favsFromStorage","localStorage","getItem","JSON","parse","initialState","items","getIndex","item","arr","findIndex","arrItem","id","favsSlice","name","reducers","addFav","state","action","newFavs","payload","setItem","stringify","deleteFav","itemsCopy","splice","actions","reducer"],"mappings":"AAAA,SAASA,cAAT,QAA+B,uBAA/B;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAEA,SAASC,OAAT,GAAkB;AAChB,MAAIC,eAAe,GAAGC,YAAY,CAACC,OAAb,CAAqBL,cAArB,CAAtB;;AACA,MAAGG,eAAe,KAAK,IAAvB,EAA4B;AACxBA,IAAAA,eAAe,GAAG,EAAlB;AACH,GAFD,MAEK;AACDA,IAAAA,eAAe,GAAGG,IAAI,CAACC,KAAL,CAAWJ,eAAX,CAAlB;AACH;;AACD,SAAOA,eAAP;AACD;;AAED,MAAMK,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAEP,OAAO;AADK,CAArB;;AAIA,SAASQ,QAAT,CAAkBC,IAAlB,EAAwBC,GAAxB,EAA4B;AACxB,SAAOA,GAAG,CAACC,SAAJ,CAAcC,OAAO,IAAIA,OAAO,CAACC,EAAR,KAAeJ,IAAI,CAACI,EAA7C,CAAP;AACH;;AAED,OAAO,MAAMC,SAAS,GAAGf,WAAW,CAAC;AACnCgB,EAAAA,IAAI,EAAE,MAD6B;AAEnCT,EAAAA,YAFmC;AAGnCU,EAAAA,QAAQ,EAAE;AACRC,IAAAA,MAAM,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAIzB,YAAMC,OAAO,GAAG,CAAC,GAAGF,KAAK,CAACX,KAAV,EAAiBY,MAAM,CAACE,OAAxB,CAAhB;AACAnB,MAAAA,YAAY,CAACoB,OAAb,CAAqBxB,cAArB,EAAqCM,IAAI,CAACmB,SAAL,CAAeH,OAAf,CAArC,EALyB,CAMzB;AACA;AACA;AACA;;AACAF,MAAAA,KAAK,CAACX,KAAN,GAAca,OAAd;AACD,KAZO;AAaRI,IAAAA,SAAS,EAAE,CAACN,KAAD,EAAQC,MAAR,KAAmB;AAC5B,YAAMM,SAAS,GAAGP,KAAK,CAACX,KAAxB;AACAkB,MAAAA,SAAS,CAACC,MAAV,CAAiBlB,QAAQ,CAACW,MAAM,CAACE,OAAR,EAAiBH,KAAK,CAACX,KAAvB,CAAzB,EAAwD,CAAxD;AACAL,MAAAA,YAAY,CAACoB,OAAb,CAAqBxB,cAArB,EAAqCM,IAAI,CAACmB,SAAL,CAAeE,SAAf,CAArC,EAH4B,CAI5B;AACA;AACA;AACA;;AACAP,MAAAA,KAAK,CAACX,KAAN,GAAckB,SAAd;AACD;AAtBO;AAHyB,CAAD,CAA7B,C,CA6BP;;AACA,OAAO,MAAM;AAAER,EAAAA,MAAF;AAAUO,EAAAA;AAAV,IAAwBV,SAAS,CAACa,OAAxC;AAEP,eAAeb,SAAS,CAACc,OAAzB","sourcesContent":["import { appStorageName } from '../../globals/globals';\nimport { createSlice } from '@reduxjs/toolkit';\n\nfunction getFavs(){\n  let favsFromStorage = localStorage.getItem(appStorageName);\n  if(favsFromStorage === null){\n      favsFromStorage = [];\n  }else{\n      favsFromStorage = JSON.parse(favsFromStorage);\n  }\n  return favsFromStorage;\n}\n\nconst initialState = {\n  items: getFavs()\n}\n\nfunction getIndex(item, arr){\n    return arr.findIndex(arrItem => arrItem.id === item.id);\n}\n\nexport const favsSlice = createSlice({\n  name: 'favs',\n  initialState,\n  reducers: {\n    addFav: (state, action) => {\n\n      \n\n      const newFavs = [...state.items, action.payload];\n      localStorage.setItem(appStorageName, JSON.stringify(newFavs));\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      state.items = newFavs;\n    },\n    deleteFav: (state, action) => {\n      const itemsCopy = state.items;\n      itemsCopy.splice(getIndex(action.payload, state.items), 1);\n      localStorage.setItem(appStorageName, JSON.stringify(itemsCopy));\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      state.items = itemsCopy;\n    }\n  },\n});\n\n// Action creators are generated for each case reducer function\nexport const { addFav, deleteFav } = favsSlice.actions\n\nexport default favsSlice.reducer;"]},"metadata":{},"sourceType":"module"}